/*
 * Stylesheet for the public overlay page. The layout and color palette
 * are inspired by the ChatGPT interface: deep greys and subtle whites
 * for the dark theme with a vibrant green accent. This file defines
 * variables for ease of customization and styles the overlay panel,
 * hero columns, glossary list and modal popups.
 */

/* Base variables for the dark theme */
:root {
  --bg-color:      #343541; /* page background */
  --panel-bg:      #444654; /* side panel and modals */
  --card-bg:       #3c3f54; /* button background */
  --hover-bg:      #565b78; /* hover state for buttons */
  --text-color:    #ececf1; /* primary text */
  --accent-color:  #10a37f; /* ChatGPT green */
  --border-color:  #565b78; /* borders */
}

/* Root styles */
body {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  background-color: var(--bg-color);
  color: var(--text-color);
  overflow: hidden; /* prevent body scroll; panel handles its own */
  /* Сбрасываем фоновое изображение, указанное в settings.json */
  background-image: none !important;
}

/* Overlay panel anchored to the left */
.overlay-panel {
  position: fixed;
  top: 0;
  left: 0;
  width: 360px;
  height: 100vh;
  background-color: var(--panel-bg);
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--border-color);
}

/* Header with tabs */
.overlay-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 6px;
  padding: 8px;
  border-bottom: 1px solid var(--border-color);
}

.tab {
  flex: 1;
  padding: 6px 8px;
  background: var(--card-bg);
  color: var(--text-color);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s;
  margin: 0 4px;
}

/* Theme toggle button */
.theme-toggle {
  background: transparent;
  color: var(--text-color);
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 6px;
}
.theme-toggle:hover {
  color: var(--accent-color);
}

/* Light theme variables */
body.light-theme {
  --bg-color:     #f7f7f8;
  --panel-bg:     #ffffff;
  --card-bg:      #ededed;
  --hover-bg:     #dadde5;
  --text-color:   #202123;
  --accent-color: #10a37f;
  --border-color: #dadde5;
}

.tab.active {
  background: var(--accent-color);
  color: #fff;
}

.tab:not(.active):hover {
  background: var(--hover-bg);
}

/* Sections */
.section {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
}

.hidden {
  display: none;
}

/* Heroes columns */
.heroes-columns {
  display: flex;
  gap: 12px;
  justify-content: stretch;
}

.status-column {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.status-column h4 {
  margin: 4px 0 8px;
  font-size: 0.95rem;
  color: var(--accent-color);
  text-align: center;
}

.status-column button {
  width: 100%;
  padding: 6px;
  margin-bottom: 6px;
  background: var(--card-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  transition: background 0.15s;
  display: flex;
  align-items: center;
  gap: 6px;
}

.status-column button:hover {
  background: var(--hover-bg);
}

/* Glossary list */
#searchInput {
  width: 100%;
  padding: 6px 8px;
  margin-bottom: 8px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--card-bg);
  color: var(--text-color);
  box-sizing: border-box;
}

.alphabet {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-bottom: 8px;
}

.alphabet button {
  padding: 4px 6px;
  background: var(--card-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s;
}

.alphabet button:hover {
  background: var(--hover-bg);
}

.terms-list div {
  padding: 4px 6px;
  border-bottom: 1px solid var(--border-color);
  cursor: pointer;
  transition: background 0.15s;
}

.terms-list div:hover {
  background: var(--card-bg);
}

/* Modal popups */
.modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--panel-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-color);
  padding: 16px;
  width: 320px;
  max-width: 90%;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  z-index: 1000;
}

.modal.hidden {
  display: none;
}

.modal h3 {
  margin: 0 0 8px;
  font-size: 1.2rem;
}

.hero-stats {
  margin-bottom: 12px;
  font-size: clamp(0.9rem, 1.8vw, 1.2rem);
}

/* Attributes of a hero (СИЛ, ЛОВ, etc.) shown in the detail panel. List them
   vertically instead of two columns to avoid large empty space. */
.attrs {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 6px;
  font-size: clamp(0.85rem, 1.6vw, 1.1rem);
}

.close-btn {
  position: absolute;
  top: 6px;
  right: 6px;
  background: transparent;
  color: var(--text-color);
  border: none;
  font-size: 1.1rem;
  cursor: pointer;
}

.close-btn:hover {
  color: var(--accent-color);
}

/* Мини‑портрет в списке героев */
.hero-icon {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  object-fit: cover;
}

/* Кнопка закрытия внутри detail-panel */
.detail-panel .close-btn {
  position: absolute;
  top: 8px;
  right: 8px;
}

/* Панель подробностей для героя или термина */
.detail-panel {
  /* Размещаем панель поверх контента и фиксируем относительно viewport */
  position: fixed;
  top: 0;
  left: 360px; /* соответствует ширине overlay-panel */
  width: calc(100% - 360px);
  height: 100vh;
  background: var(--panel-bg);
  border-left: 1px solid var(--border-color);
  padding: 16px;
  box-sizing: border-box;
  overflow-y: auto;
  z-index: 500;
}

.detail-panel.hidden {
  display: none;
}

/* Заголовок и контент панели */
#detailHeader {
  margin: 0 0 16px;
  /* Используем clamp, чтобы текст адаптировался от маленького до большого размера по ширине экрана */
  font-size: clamp(1.3rem, 2vw, 2rem);
  color: var(--accent-color);
}

/* Container for the detail panel body (hero or glossary). Use flex to position
   the hero portrait on the left and the details on the right. The flex layout
   allows the image to maintain a fixed width while the text adapts to the
   remaining space. */
#detailBody {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  flex-wrap: wrap;
}

/* Portrait of the hero shown in the detail panel. Fix the width so that it
   doesn't stretch across the entire panel. Height is automatic to preserve
   aspect ratio. The flex container ensures the remaining text flows
   alongside the image. */
#detailBody img.hero-portrait {
  width: 180px;
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  flex-shrink: 0;
}

/* Wrapper for hero information in the detail panel. This section will
   occupy the remaining horizontal space next to the portrait. */
.hero-info {
  flex: 1 1 auto;
  min-width: 0;
}

/* Ensure paragraphs in the detail panel (glossary terms) occupy the full
   available width when displayed alone inside the flex container. */
#detailBody p {
  flex: 1 1 100%;
  margin-top: 0;
}
